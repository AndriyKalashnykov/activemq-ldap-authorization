<blueprint xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0"
  xmlns:jaas="http://karaf.apache.org/xmlns/jaas/v1.0.0"
  xmlns:ext="http://aries.apache.org/blueprint/xmlns/blueprint-ext/v1.0.0">

  <jaas:config name="karaf" rank="100">
    <jaas:module className="org.apache.karaf.jaas.modules.ldap.LDAPLoginModule" flags="required">
      initialContextFactory=com.sun.jndi.ldap.LdapCtxFactory
      connection.username=cn=admin,dc=activemq,dc=apache,dc=org
      connection.password=admin
      connection.protocol=
      connection.url=ldap://localhost:389
      user.base.dn=ou=User,ou=ActiveMQ,dc=activemq,dc=apache,dc=org
      user.filter=(uid=%u)
      user.search.subtree=true
      role.base.dn=ou=Group,ou=ActiveMQ,dc=activemq,dc=apache,dc=org
      role.name.attribute=cn
	    role.filter=(member:=uid=%u)
      role.search.subtree=false
	  <!-- 
		key note: add mapping of LDAP groups to themselves, so LDAP groups are not lost for Karaf :
		admins=admins,...;users=users,...
	  -->
	  role.mapping=admins=admins,admin,manager,viewer,Monitor,Operator,Maintainer,Deployer,Auditor,Administrator,SuperUser,Developer;users=users,User,admin,viewer,Monitor,Operator
      authentication=simple
    </jaas:module>
  </jaas:config>
</blueprint>
